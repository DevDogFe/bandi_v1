<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bandi.novel.repository.QnaRepository">

	<!-- Qna 전체조회 -->
	<select id="findAll" resultType="com.bandi.novel.dto.QnaDto">
		select q.*, a.content, a.created_at
		from question_tb as q
		inner join answer_tb as a
		on q.id = a.question_id
	</select>

	<!-- Qna userId 전체조회 -->
	<select id="findByUserId" resultType="com.bandi.novel.dto.QnaDto">
		select q.*, a.content, a.created_at
		from question_tb as q
		inner join answer_tb as a
		on q.id = a.question_id
		where q.user_id = #{userId}
	</select>
	
	<insert id="insert">
		insert into question_tb(user_id, title, content, faq_category_id)
		VALUES (#{userId}, #{title}, #{content}, #{faqCategoryId})
	</insert>


</mapper>
